sudo: false
install: true

os:
  - linux

branches:
  only:
  - master

matrix:
  include:
    - language: rust
      rust:
        - "1.0.0"
        - "1.1.0"
        - "stable"
        - "beta"
        - "nightly"
      allow_failures:
        - rust: "beta"
        - rust: "nightly"
      script:
        - make
    - language: python
      python:
        - "2.7"
        - "3.3"
        - "3.4"
        - "3.5"
        - "3.6"
        - "nightly"
      before_script:
        - pip install pytest pytest-benchmark
      script:
        - make test
      allow_failures:
        - python: "3.3"
        - python: "3.4"
        - python: "3.5"
        - python: "3.6"
        - python: "nightly"
